(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(66)},37:function(e,t,n){},38:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),u=n(28),o=n.n(u),l=(n(37),n(2)),i=n(7),c=n(9),h=n(8),m=n(10),d=n(13),p=(n(38),n(14)),g=n(15),f=n.n(g),v=function e(){var t=this;Object(l.a)(this,e),this.addUrl=function(e,n){return t.shorten.post("/add",{destination:e,userId:n}).then(function(e){return e.data})},this.deleteUrl=function(e,n){return t.shorten.post("/delete",{urlId:e,userId:n}).then(function(e){return e.data})},this.getListOfUrls=function(e){return t.shorten.post("/list",{userId:e}).then(function(e){return e.data})},this.shorten=f.a.create({baseURL:"".concat("https://artificial-shortener.herokuapp.com","/url"),withCredentials:!0})},b=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state.destination,a=n.props.userLoggedIn.userId;n.shortenService.addUrl(t,a).then(function(e){var t="".concat("https://artificial-shortener.herokuapp.com","/").concat(e._id);n.setState({shortUrl:t})}).catch(function(e){return console.log(e)})},n.state={destination:"",shortUrl:""},n.shortenService=new v,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Url Shortener"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{id:"destination",name:"destination",type:"text",onChange:this.handleChange,value:this.state.destination,placeholder:"type or paste your url here"}),r.a.createElement("input",{type:"submit",value:"Get short url"})),r.a.createElement("p",null,"The following short url was created for you"),r.a.createElement("p",null,this.state.shortUrl))}}]),t}(a.Component),E=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,n){return t.authorise.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.authorise.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.userLoggedIn=function(){return t.authorise.get("/userloggedin").then(function(e){return e.data})},this.logout=function(){return t.authorise.post("/logout").then(function(e){return e.data})},this.authorise=f.a.create({baseURL:"https://artificial-shortener.herokuapp.com",withCredentials:!0})},w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.authService.signup(a,r).then(function(e){n.setState({username:"",password:""}),n.props.setCurrentUser(e)}).catch(function(e){return console.log("error: "+e)})},n.state={username:"",password:""},n.authService=new E,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{name:"username",type:"text",placeholder:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("input",{name:"password",type:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("input",{className:"submit",type:"submit",value:"Signup"})),r.a.createElement("p",null,this.state.error))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.authService.login(a,r).then(function(e){n.setState({username:"",password:""}),n.props.setCurrentUser(e)}).catch(function(e){return console.log("error: "+e)})},n.state={username:"",password:""},n.authService=new E,n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{name:"username",type:"text",placeholder:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("input",{name:"password",type:"password",placeholder:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("input",{className:"submit",type:"submit",value:"Login"})),r.a.createElement("p",null,this.state.error))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).getUrlList=function(e){n.shortenService.getListOfUrls(e).then(function(e){n.setState({urlList:e})}).catch(function(e){return console.log(e)})},n.deleteUrl=function(e){e.preventDefault();var t=e.target.value;console.log("url id: "+t);var a=n.state.urlList.filter(function(e){return e._id!==t});n.shortenService.deleteUrl(t,n.props.userLoggedIn.userId).then(function(e){n.setState({urlList:a})}).catch(function(e){return console.log(e)})},n.state={urlList:[]},n.shortenService=new v,n.getUrlList(n.props.userLoggedIn.userId),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.urlList.map(function(t){return r.a.createElement("li",{key:t._id},r.a.createElement("span",null,t.destination),r.a.createElement("button",{onClick:e.deleteUrl,value:t._id},"delete"))});return r.a.createElement("div",{className:"main"},r.a.createElement("h3",null,"My personal url's"),r.a.createElement("ul",null,t))}}]),t}(a.Component),j=n(29),U=function(e){var t=e.component,n=e.userLoggedIn,a=Object(j.a)(e,["component","userLoggedIn"]);return r.a.createElement(d.b,Object.assign({},a,{userLoggedIn:n,render:function(e){return n?r.a.createElement(t,Object.assign({},e,{userLoggedIn:n})):r.a.createElement(d.a,{to:"/login"})}}))},C=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).setCurrentUser=function(e){n.setState({currentUser:e})},n.logout=function(){return n.authService.logout().then(function(e){n.setState({currentUser:null})}),r.a.createElement(d.a,{to:"/"})},n.state={currentUser:null},n.authService=new E,n.getCurrentUser(),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getCurrentUser",value:function(){var e=this;this.state.currentUser||this.authService.userLoggedIn().then(function(t){e.setState({currentUser:t})})}},{key:"render",value:function(){var e=this.state.currentUser;return r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"nav-header"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/"},"Home")),e?null:r.a.createElement("li",null,r.a.createElement(s.b,{to:"/signup"},"Signup")),e?null:r.a.createElement("li",null,r.a.createElement(s.b,{to:"/login"},"Login")),e?r.a.createElement("li",null,r.a.createElement(s.b,{to:"/list"},"My shortened urls")):null,e?r.a.createElement("li",null,r.a.createElement(s.b,{to:"/logout"},"Logout")):null)),r.a.createElement(d.d,null,r.a.createElement(U,{exact:!0,path:"/",userLoggedIn:e,component:b}),r.a.createElement(U,{exact:!0,path:"/list",userLoggedIn:e,component:S}),r.a.createElement(d.b,{exact:!0,path:"/signup"},e?r.a.createElement(d.a,{to:"/"}):r.a.createElement(w,{setCurrentUser:this.setCurrentUser})),r.a.createElement(d.b,{exact:!0,path:"/login"},e?r.a.createElement(d.a,{to:this.props.location}):r.a.createElement(O,{setCurrentUser:this.setCurrentUser})),r.a.createElement(d.b,{exact:!0,path:"/logout",render:this.logout})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(s.a,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.4de2940a.chunk.js.map